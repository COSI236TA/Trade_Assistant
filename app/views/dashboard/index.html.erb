

<div class="dashboard">

  <div class="container">
  <div class="row">
    <div class="col-md-8 col-md-offset-2">
<h1>Hi, <%= @user_name %></h1>


<br>

<p><%= link_to "Create New Rule", create_rule_path, :class => "btn btn-default" %></p>


<table class="table table-hover table-bordered table-condensed table-striped tablesorter" id = "myTable"> 

  <thead>
    <th>Rule</th>
    <th>Portfolio</th>
    <th>Last Triggered</th>
    <th><center>Description</center></th>
    <th>Activated</th>
    <th>Delete</th>
  </thead>
  <tbody>
    <% if @my_rules != nil %>
      <% @my_rules.each do |rule| %>
      <tr>
      <td><a class="btn btn-primary" data-toggle="modal" data-target=".bs-example-modal-lg" onclick = "change_html('/rules/get_rule_html?rule_id=<%= rule.id %>')"><%= rule.name %></a></td>
      <td><a class="various" data-fancybox-type="iframe" href="/portfolios/get_portfolio_html?portfolio_id=<%= rule.portfolio.id %>"><%= rule.portfolio.name %></a>
      </td>
      <td><%= rule.triggered? %></td>
      <td><%= rule.description %></td>
      <td><%= rule.activated? %></td>
      <td><%= link_to "Delete", rule_path(:id=>rule.id), :method=>:delete %>
      </td>
      </tr>
      <% end %>
    <% end %>
  </tbody>
</table>

<!-- Large modal -->
<button class="btn btn-primary" data-toggle="modal" data-target=".bs-example-modal-lg" href = "www.google.com">Large modal</button>

<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content" id = "test" width ="900px" margin-left = "-150px">
      
    </div>
  </div>
</div>



<body>

<script>
$(document).ready(function() {



     $('.modal-content').animate({"height":"500px", "margin-top":"-30px"});




     $('.modal').animate({"position" : "absolute"});
     $('.modal').css('top', $(document).scrollTop() + 150);



  $("table#myTable").tablesorter({
         theme : 'blue'


  });



  $(".various").fancybox({
    helpers : {
            title : {
                type: 'outside',
                position : 'top',
            }
        },
    title: 'Test',
    maxWidth  : 1200,
    maxHeight : 800,
    fitToView : false,
    width   : '70%',
    height    : '70%',
    autoSize  : false,
    closeClick  : false,
    openEffect  : 'none',
    closeEffect : 'none',

  });



});


function change_html(html){

     $.ajax({
        url: html,
        dataType:'html',
          success: function(data){
                  document.getElementById('test').innerHTML = data
          },
          error: function(){
              alert('error');
          },
     type: 'GET'

      });

};

</script>



</body>

</div>

</div>
  </div>
</div>

