<%= form_for(@rule) do |rule_form| %> 


<div class= "row form-group full_screen" id="portfolio">
  <h2 class="create-rule-section">Create Portfolio <small>Step 1 of 4</small>
    <a id="back-body" class="scroll-action back btn btn-default" role="button">Back</a>
  </h2>

  <div class="col-xs-4 center-screen">

  <%= rule_form.fields_for :portfolio do |portfolio_field| %>
    <%= portfolio_field.fields_for :stocks do |stock_field| %>
      <%= stock_field.text_field :ticker, class: 'form-control', placeholder: 'Enter stock tickers' %>
    <% end %>
    <span class="help-block">Like "GOOG" for Google. If you are not sure about the ticker, just type in the company name, we will search for you.</span>
    <script>
      $("#rule_portfolio_stocks_ticker").tokenInput(
        "ticker_auto_complete", {
          theme: "facebook",
          propertyToSearch: "ticker",
          hintText: "Type in company name or ticker",
          tokenValue: "ticker",
          preventDuplicates: "true",
          minChars: 2,
          resultsFormatter: function(item) {
            return "<li>" + item.name + "(" + item.ticker + ")" + "</li>";
          },
          tokenFormatter: function(item) {
            return "<li>" + item.ticker + "</li>";
         }
       }
      );
    </script>
    <%= portfolio_field.text_field :name, class: 'form-control', placeholder: "Enter the name of the portfolio" %>
    <%= portfolio_field.text_area :description, class: 'form-control', rows: "3", placeholder: "Enter the description of the portfolio" %>

  <% end %>
  <p class="btn btn-primary scroll-action center-btn" id="to-property">Next Step</p>
  </div>
</div>

<%= render partial: 'form_create_rule', locals: {rule_form: rule_form} %>

<% end %>

